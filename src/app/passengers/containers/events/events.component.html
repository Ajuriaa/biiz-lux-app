<app-shared-loading class="loading" *ngIf="loading"></app-shared-loading>

<div class="container"  [ngClass]="{'barcode-scanner-active' : scanOpen}">
  <div class="map" #map></div>
  <div class="header-wrapper">
    <app-shared-header class="header"></app-shared-header>
    <div class="event-info" *ngIf="selectedEvent.id !== 0">
      <div class="img">
        <img class="logo" src="assets/images/location-arrows.svg">
      </div>
      <div class="input-wrapper">
        <ion-input
          [(ngModel)]="currentAddress"
          placeholder="DirecciÃ³n actual"
          [readonly]="true"
        ></ion-input>
        <ion-input
          [(ngModel)]="eventName"
          placeholder="Evento"
          [readonly]="true"
        ></ion-input>
      </div>
    </div>
    <div (click)="selectConcert(1)" class="concert-wrapper" *ngIf="selectedEvent.label === 'concerts' && selectedConcert !== 2">
      <p class="concert-name"> CONCIERTO CAROL G 17/7 </p>
      <div class="concert-info">
        <p class="concert-place" [ngClass]="{'selected' : selectedConcert === 1}"> ESTADIO CHOCHI SOSA </p>
        <p class="concert-fare"> IDA Y VUELTA L.360.00 </p>
      </div>
    </div>
    <div (click)="selectConcert(2)" class="concert-wrapper" *ngIf="selectedEvent.label === 'concerts' && selectedConcert !== 1">
      <p class="concert-name"> CONCIERTO CAROL G 17/7 </p>
      <div class="concert-info">
        <p class="concert-place" [ngClass]="{'selected' : selectedConcert === 2}"> ESTADIO CHOCHI SOSA </p>
        <p class="concert-fare"> IDA Y VUELTA L.360.00 </p>
      </div>
    </div>
    <div (click)="selectMatch()" class="concert-wrapper" *ngIf="selectedEvent.label === 'sports'">
      <p class="concert-name"> OLIMPIA VS MOTAGUA </p>
      <div class="concert-info">
        <p class="concert-place" [ngClass]="{'selected' : matchSelected}"> ESTADIO JOSE DE LA PAZ UCLES </p>
        <p class="concert-fare"> IDA Y VUELTA L.400.00 </p>
      </div>
    </div>
    <div (click)="scan()" class="scan-wrapper" *ngIf="selectedEvent.label === 'scan'">
      <p class="concert-name"> ESCANEAR CODIGO </p>
      <ion-icon class="camera" name="camera"></ion-icon>
    </div>
  </div>
  <div class="button-container">
    <div [@inAnimation] class="events-container" *ngIf="!eventSelected">
      <app-available-events [events]="events" (selected)="selectEvent($event)"></app-available-events>
    </div>
    <div [@inAnimation] *ngIf="eventSelected && !hideCard">
      <ion-icon (click)="eventList()" class="icon" name="arrow-back-circle"></ion-icon>
      <app-event-card [event]="selectedEvent" [unique]="true"></app-event-card>
    </div>
    <div class="karol" [@inAnimation] *ngIf="eventSelected && selectedConcert !== 0">
      <img src="https://biiz-bucket.s3.us-east-2.amazonaws.com/karol.png"/>
      <div class="black-box">
        <p class="label">REST. VALOR APROX</p>
        <p class="label">DESCRIPCION</p>
        <p class="msg inter"> {{ message }} </p>
      </div>
    </div>
    <app-primary-button (btnClick)="startTrip(selectedEvent)" class="confirm">
      <p class="text">CONFIRMAR DESTINO</p>
      <img class="button-image" [src]="imageUrl">
    </app-primary-button>
  </div>
</div>
